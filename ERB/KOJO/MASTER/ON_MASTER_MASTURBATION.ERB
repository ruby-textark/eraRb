@onMasterMasturbation(partIdx)
#dim dynamic partIdx
#dim dynamic sexLogIdx

	; todo 여기 끝낼것

	; 최근 5회 내의 성교 경험을 떠올리며
	if !RAND:3 && (partIdx == 121 || partIdx == 122)
		sexLogIdx = ((SexLogPtr + SexLogSize - (1 + RAND:5)) % SexLogSize)

		if SexLogAmount:sexLogIdx > 0
		endif
	; 개발된 부위일 경우
	elseif !RAND:3 && ABL:MASTER:partIdx > 3
	
		printFormW %kr(NAME:MASTER, "은", "는")% %partStrRaw(partIdx)%에
	
	; 유두자위
	elseif !RAND:3 && (partIdx == 113)
		if ABL:MASTER:유두감도 > 3
			if RAND:3 == 0
				printFormW 이미 추잡하게 개발된 %kr(partStrRaw(partIdx), "으로", "로")% 손가락을 갖다대자마자 그 꼭지부터 퍼지는 짜릿한 감각이 %kr(NAME:MASTER, "을", "를")% 미치게 만든다.
			elseif RAND:2 == 0
				printFormW %kr(NAME:MASTER, "은", "는")% 입을 반쯤 벌린 채 오직 %kr(partStrRaw(partIdx), "을", "를")% 양손가락으로 간질이며 음락의 파도 속을 헤어나오지 못하고 있다.
			endif
		endif
	; 애널자위
	elseif !RAND:3 && (partIdx == 123)
	endif

	if RAND:3 == 0
		if CFLAG:MASTER:태생 == 1
			if RAND:3 == 0 && EXP:MASTER:자위경험 < 100
				call speak(MASTER, "이런 걸 모르고 살았다니... 인생 절반 손해봤어.")
			elseif RAND:3 == 0 && EXP:MASTER:자위경험 < 300
				call speak(MASTER, "이, 이건 마법의 연구니까, 어쩔 수 없는거야.")
				printFormW 자위와 마법이 어떤 관계인지는 모르겠지만, 어쨌든 말도 안 되는 자기 합리화를 한 %kr(NAME:MASTER, "은", "는")% 곧 칠칠맞지 못한 표정으로 손을 바쁘게 움직였다.
			elseif RAND:3 == 0 && EXP:MASTER:자위경험 >= 300
				call speak(MASTER, "헤에엑, 흐윽, 으읏...")
				printFormW %kr(NAME:MASTER, "은", "는")% 이제는 변명조차 없이, 총명한 모습은 어디로 갔는지 완전히 자위밖에 모르는 원숭이같은 표정으로 몸을 파르르 떨었다.
			endif
		elseif CFLAG:MASTER:태생 == 2
			if RAND:3 == 0
				call speak(MASTER, "(내가, 이런 저급한 욕망에 지다니.)")
			elseif RAND:2 == 0
				call speak(MASTER, "(괜히 싸울 때 생각나면 안되니까.)")
			else
				call speak(MASTER, "으읏... 흐읏.")
				printFormW %kr(NAME:MASTER, "은", "는")% 조용히, 하지만 분주하게 손을 놀렸다.
				if ABL:MASTER:partIdx > 4
					call speak(MASTER, "흐아악, 하앗, 으흡...♥")
					printFormW %NAME:MASTER%의 눈빛은 전투에 집중할 때의 그것과 비슷하게 열정적이었지만, 날카로운 눈빛 대신 쾌감에 빠져 흐리멍덩한 얼굴로 입을 헤 벌릴 뿐이었다.
				endif
			endif
		elseif CFLAG:MASTER:태생 == 3
			if RAND:3 == 0
				call speak(MASTER, "으응, 조금은 괜찮겠지?")
			elseif RAND:2 == 0
				call speak(MASTER, "으응, 조금은 괜찮겠지?")
			endif
		elseif CFLAG:MASTER:태생 == 4
			if ABL:MASTER:자위중독 < 3 && RAND:3 == 0
				call speak(MASTER, "(요즘 좀 자주 하고 있는 것 같은데...)")
				call speak(MASTER, "(뭐, 좋은 게 좋은 거지)")
			elseif 3<= ABL:MASTER:자위중독 && ABL:MASTER:자위중독 < 6 && RAND:3 == 0
				call speak(MASTER, "이거 틀림없이 중독이잖아...")
				call speak(MASTER, "그래도, 이 몸이 야한 게 잘못이니까, 어쩔 수 없는걸...")
			elseif ABL:MASTER:자위중독 >= 6 && RAND:3 == 0
				call speak(MASTER, "오옷...♥ 오오오... 으윽...♥")
				call speak(MASTER, "헤으으윽, 흐극, 흐아앗")
			endif
		elseif CFLAG:MASTER:태생 == 5
			if EXP:MASTER:자위경험 < 300
				if RAND:3 == 0
					printFormW 은근히 눈을 희번덕거리며 %kr(NAME:MASTER, "은", "는")% 호기심을 감추지 못한 눈으로 손을 %kr(partStrRaw(partIdx), "으로", "로")% 가져다 댔다.
					call speak(MASTER, "아아, 이런... 주여, 저를 용서하세요...")
				elseif RAND:2 == 0
					call speak(MASTER, "여기 쾌락의 갈림길 앞에 번뇌에 빠진 어린양이 있습니다...")
					printFormW 그래봤자 자위를 할 뿐이면서, 기도를 올리며 교성을 흘리는 %NAME:MASTER%의 모습은 배덕적인 미를 뽐내고 있었다.
				endif
			elseif EXP:MASTER:자위경험 < 600
				if RAND:3 == 0
					call speak(MASTER, "어째서 저를 벌하지 않으시는 건가요...")
					call speak(MASTER, "혹시, 이것이 잘못된 행위가 아닌 것입니까.")
				elseif RAND:2 == 0
					call speak(MASTER, "저를, 시험에 들게 하지 마옵소서.")
					call speak(MASTER, "(그렇다고 해도, 이 알 수 없는 쾌락이란 도대체... 자칫하다간 헤어나올 수 없게 될 지도 모르겠어요.)")
				endif
			else
				if RAND:3 == 0
					call speak(MASTER, "주여, 당신이 제 곁에 있습니다...")
					printFormW 격한 쾌락에 절정을 향해 치닫는 %kr(NAME:MASTER, "은", "는")% 환각이라도 보는 것인지 횡설수설하기 시작했다.
				elseif RAND:2 == 0
					call speak(MASTER, "안 돼... 이래서는, 성녀 실격입니다,만...")
				endif
			endif
		endif
	else
		if CFLAG:MASTER:성격 == 1
			call speak(MASTER, "뭔가, 이렇게 만지면 기분이 좋아지네요")
		elseif CFLAG:MASTER:성격 == 2
			call speak(MASTER, "")
		elseif CFLAG:MASTER:성격 == 3
			call speak(MASTER, "")
		elseif CFLAG:MASTER:성격 == 4
			call speak(MASTER, "")
		elseif CFLAG:MASTER:성격 == 5
			call speak(MASTER, "")
		endif
	endif

	; 1회당 250
	repeat (5 + RAND:((ABL:MASTER:자위중독 + 1) * 5))
		EXP:MASTER:자위경험++
		EXP:MASTER:partIdx++

		call increaseArousal(partIdx, 250)
		call checkOrgasm

		if PALAM:MASTER:partIdx < masterOrgasmThres() / 4
			break
		endif
	rend
