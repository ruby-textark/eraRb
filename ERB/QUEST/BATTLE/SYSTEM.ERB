@EVENTTRAIN

	; 삽입상태초기화
	CFLAG:MASTER:101 = 0
	CFLAG:MASTER:102 = 0
	CFLAG:MASTER:103 = 0
	CFLAG:MASTER:104 = 0

	printFormL %NAME:TARGET% %kr(CALLNAME:TARGET, "을", "를")% 발견. 전투를 개시합니다.
	printL
	wait

@SHOW_STATUS

	barstr BASE:MASTER:체력, MAXBASE:MASTER:체력, 10
	printFormL %CALLNAME:MASTER%의 체력 : %results% ({BASE:MASTER:체력}/{MAXBASE:MASTER:체력})

	barstr BASE:TARGET:체력, MAXBASE:TARGET:체력, 10
	printFormL %CALLNAME:TARGET%의 체력 : %results% ({BASE:TARGET:체력}/{MAXBASE:TARGET:체력})
	
	drawLine
	print_palam MASTER
	drawLine

@SHOW_USERCOM

@USERCOM

@SOURCE_CHECK
	
	SOURCE:MASTER:공격 = LOSEBASE:체력 / 10
	BASE:TARGET:체력 -= LOSEBASE:0
	BASE:TARGET:마력 -= LOSEBASE:1

	; Check if killed
	if BASE:TARGET:체력 <= 0
		begin aftertrain
		return
	endif
	
	LOSEBASE:0 = 0
	LOSEBASE:1 = 0
	call processEnemy

	; Check if failed
	if BASE:MASTER:체력 <= 0
		begin aftertrain
		return
	endif

	SOURCE:MASTER:피격 = LOSEBASE:체력 / 10
	BASE:MASTER:체력 -= LOSEBASE:체력
	BASE:MASTER:마력 -= LOSEBASE:마력
	
	LOSEBASE:체력 = 0
	LOSEBASE:마력 = 0

	call calcPalam

@EVENTCOMEND
	call checkVirgin
	call checkOrgasm

	TARGET = MASTER
	upCheck
	TARGET = 1

	wait
