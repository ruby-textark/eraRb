@checkOrgasmInTown
#dim dynamic orgasmThres
#dim dynamic partIdx
#dim dynamic orgasmCount
#dim dynamic orgasmParts, 100
#dim dynamic insuffOrgasm

	orgasmThres = masterOrgasmThres()
	for partIdx, 501, 600
		if CFLAG:MASTER:partIdx >= orgasmThres
			printFormW %CSTR:MASTER:(partIdx - 500)% 절정
			orgasmParts:(orgasmCount++) = partIdx - 400
			DOWN:partIdx = CFLAG:MASTER:partIdx - CFLAG:MASTER:partIdx % orgasmThres

			; 절정경험 증가
			EXP:MASTER:절정경험 += CFLAG:MASTER:partIdx / orgasmThres
			if BASE:MASTER:혈중미약농도 > 100
				EXP:MASTER:미약절정경험 += CFLAG:MASTER:partIdx / orgasmThres
			endif
			EXP:MASTER:(partIdx + 100) += CFLAG:MASTER:partIdx / orgasmThres
		elseif CFLAG:MASTER:partIdx >= 10000
			; 절정봉인 적용중
			insuffOrgasm++
		endif
	next

	if orgasmCount
		call onMasterOrgasm_m(orgasmParts, orgasmCount, 0)
	elseif insuffOrgasm
		printFormL %kr(CALLNAME:MASTER, "은", "는")% 절정을 봉인당한 상태다
		call onMasterInsuffOrgasm_m(0)
	endif
